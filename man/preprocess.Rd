% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/preprocess.R
\name{preprocess}
\alias{preprocess}
\title{Preprocess raw datasets based on spec}
\usage{
preprocess(datasets_pool, spec_path, export_to_env = FALSE)
}
\arguments{
\item{datasets_pool}{A named list of raw datasets, typically the output of \code{load_dataset()}.}

\item{spec_path}{File path to the preprocessing spec (Excel, with sheet "PREPROCESSING").}
}
\value{
A list with two elements:
\describe{
\item{\code{visit_info_df}}{A data frame with one row per dataset,
containing subject/site variable names and detected visit columns.}
\item{\code{datasets_pool}}{The updated datasets after preprocessing.}
}
}
\description{
This function standardizes subject and site identifiers, applies
preprocessing rules defined in the spec, and captures visit-related
metadata for each dataset in the pool. The main steps include:
\enumerate{
\item Identify subject and site variables and create unified columns
\code{SUBJECT_ID} and \code{SITEID}.
\item Apply row- and column-level filtering rules from the spec
(sheet "PREPROCESSING").
\item Detect visit-related columns (visit date and visit label).
\item Return updated datasets and a summary data frame of metadata.
}
}
\examples{
\dontrun{
  res <- preprocess(datasets_pool, "spec.xlsx")
  res$visit_info_df
  head(res$datasets_pool$ds6001)
}

}
